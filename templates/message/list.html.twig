{# templates/message/list.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Mes Messages
{% endblock %}

{% block body %}
{% block stylesheet %}
	<link rel="stylesheet" href="{{ asset('css/listMess.css') }}">
{% endblock %}

	<h1>Mes conversations</h1>

	{% for userGroup in groupedMessages %}
		<div class="card mb-3">
			<div class="card-header">
				<h5>{{ userGroup.user.pseudo }}</h5>
				<!-- Affiche le nom de l'utilisateur -->
			</div>
			<div class="card-body">
				<ul class="list-group">
					{% for message in userGroup.messages %}
						<li class="list-group-item {% if message.sender == app.user %}text-end{% endif %}">
							<strong>{{ message.sender.pseudo }}:</strong>
							{{ message.content }}
						</li>
					{% endfor %}
				</ul>
				<a href="{{ path('app_message_create', {'id': userGroup.user.id}) }}" class="btn btn-primary mt-3">Envoyer un message</a>
			</div>
		</div>
	{% else %}
		<p>Vous n'avez pas encore de messages.</p>
	{% endfor %}
{% endblock %}

