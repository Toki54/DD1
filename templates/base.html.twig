{# templates/base.html.twig #}
<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}Bienvenue sur Parlottes !
			{% endblock %}
		</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="{{ asset('css/base.css') }}">
		<script src="https://unpkg.com/feather-icons"></script>
	</head>
	<body>

		<!-- TITRE -->
		<header class="site-header">
			<h1>Parlottes</h1>
		</header>

		<!-- NAVBAR -->
		<nav class="navbar">
			<div class="nav-container">
				<button class="hamburger" id="hamburger">
					<span></span>
					<span></span>
					<span></span>
				</button>
				<ul class="nav-list" id="nav-list">
					{% if app.user %}
						<li><a href="{{ path('app_profile_show') }}"><i data-feather="user"></i> Mon Profil</a></li>
						<li><a href="{{ path('app_messages') }}"><i data-feather="message-circle"></i> Mes messages</a></li>
						<li><a href="{{ path('app_profile_likes') }}"><i data-feather="heart"></i> Mes likes et visites</a></li>
						<li><a href="{{ path('app_profiles_list') }}"><i data-feather="users"></i> Liste des profils</a></li>

						{# ✅ Bouton abonnement change si ROLE_PREMIUM #}
						{% if is_granted('ROLE_PREMIUM') %}
							<li>
								<a href="{{ path('app_stripe_subscribe') }}" class="nav-subscribed">
									<i data-feather="check-circle"></i> Abonné
								</a>
							</li>
						{% else %}
							<li>
								<a href="{{ path('app_stripe_subscribe') }}">
									<i data-feather="credit-card"></i> Abonnements
								</a>
							</li>
						{% endif %}

						<li><a href="{{ path('app_logout') }}" class="logout"><i data-feather="log-out"></i> Logout</a></li>
					{% else %}
						<li><a href="{{ path('app_home') }}"><i data-feather="home"></i> Accueil</a></li>
						<li><a href="{{ path('app_login') }}"><i data-feather="log-in"></i> Login</a></li>
						<li><a href="{{ path('app_register') }}"><i data-feather="user-plus"></i> Inscription</a></li>
					{% endif %}
				</ul>
			</div>
		</nav>

		<!-- CONTENU PRINCIPAL -->
		<main class="container">
			{% block body %}{% endblock %}
		</main>

		<!-- FOOTER -->
		<footer>
			<p>&copy; {{ "now"|date("Y") }} Site de Rencontre. Tous droits réservés.</p>
		</footer>

		<script>
			feather.replace();

			const hamburger = document.getElementById('hamburger');
			const navList = document.getElementById('nav-list');

			// Toggle menu
			hamburger.addEventListener('click', () => {
				navList.classList.toggle('open');
			});

			// Fermer le menu si on passe en desktop
			function checkResize() {
				if (window.innerWidth > 768) {
					navList.classList.remove('open');
				}
			}
			window.addEventListener('resize', checkResize);
			checkResize();
		</script>

		{# Bootstrap JS #}
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
