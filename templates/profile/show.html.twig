{% extends 'base.html.twig' %}

{% block title %}Profile
{% endblock %}

{% block body %}
	{% block stylesheet %}
		<link rel="stylesheet" href="{{ asset('css/profile.css') }}">
	{% endblock %}

	<div class="profile-container">
		<h1>Profil de
			{{ app.user.pseudo }}</h1>

		<div class="profile-info">
			<div class="avatar">
				{% if userProfile.avatar %}
					<img src="{{ asset('uploads/avatars/' ~ userProfile.avatar) }}" alt="Avatar">
				{% else %}
					<p>Aucun avatar uploadé.</p>
				{% endif %}
			</div>

			<div class="profile-details">
				<h3>À propos de moi :</h3>
				<p>{{ userProfile.biography|default('Aucune biographie disponible.') }}</p>

				<h3>Sexe :</h3>
				<p>{{ userProfile.sex|default('Non spécifié.') }}</p>

				<h3>Situation :</h3>
				<p>{{ userProfile.situation|default('Non renseigné.') }}</p>

				<h3>Je recherche :</h3>
				<p>{{ userProfile.research|default('Non spécifié.') }}</p>
			</div>
		</div>

		<div class="photos">
			<h3>Photos :</h3>
			{% set photos = userProfile.photos|default([]) %}

			{% if photos is not empty %}
				<div class="photo-gallery">
					{% for photo in photos %}
						<img src="{{ asset('uploads/photos/' ~ photo) }}" alt="User Photo" class="photo-thumbnail" data-bs-toggle="modal" data-bs-target="#photoCarousel" data-bs-slide-to="{{ loop.index0 }}">
					{% endfor %}
				</div>
			{% else %}
				<p>Aucune photo uploadée.</p>
			{% endif %}
		</div>

		<a href="{{ path('app_profile_edit') }}" class="btn btn-primary">Éditer mon profil</a>
	</div>

	{# CAROUSEL MODAL #}
	<div class="modal fade" id="photoCarousel" tabindex="-1">
		<div class="modal-dialog modal-fullscreen">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
						<div class="carousel-inner">
							{% for photo in photos %}
								<div class="carousel-item {% if loop.first %}active{% endif %}">
									<img src="{{ asset('uploads/photos/' ~ photo) }}" class="d-block w-100" alt="User Photo">
								</div>
							{% endfor %}
						</div>
						<button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
							<span class="carousel-control-prev-icon" aria-hidden="true"></span>
							<span class="visually-hidden">Previous</span>
						</button>
						<button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
							<span class="carousel-control-next-icon" aria-hidden="true"></span>
							<span class="visually-hidden">Next</span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

