{% extends 'base.html.twig' %}

{% block title %}Modifier votre profil
{% endblock %}

{% block body %}
	{% block stylesheets %}
		<link rel="stylesheet" href="{{ asset('css/edit.css') }}">
	{% endblock %}
	<div class="container">
		<h1 class="my-4 text-center">Modifier votre profil</h1>

		{% for message in app.flashes('success') %}
			<div class="alert alert-success text-center">
				{{ message }}
			</div>
		{% endfor %}

		{{ form_start(form, {'attr': {'enctype': 'multipart/form-data', 'class': 'profile-form'}}) }}

		<div class="row">
			<div class="col-md-6">
				<div class="mb-3">
					{{ form_label(form.sex) }}
					{{ form_widget(form.sex, {'attr': {'class': 'form-control'}}) }}
				</div>

				<div class="mb-3">
					{{ form_label(form.situation) }}
					{{ form_widget(form.situation, {'attr': {'class': 'form-control'}}) }}
				</div>

				<div class="mb-3">
					{{ form_label(form.biography) }}
					{{ form_widget(form.biography, {'attr': {'class': 'form-control'}}) }}
				</div>

				<div class="mb-3">
					{{ form_label(form.research) }}
					{{ form_widget(form.research, {'attr': {'class': 'form-control'}}) }}
				</div>
			</div>

			<div class="col-md-6">
				<div class="mb-3">
					{{ form_label(form.avatarFile) }}
					{{ form_widget(form.avatarFile, {'attr': {'class': 'form-control'}}) }}
					<small class="text-muted">Téléchargez une photo de profil (JPG, PNG, GIF)</small>
				</div>

				<div class="mb-3">
					{{ form_label(form.department) }}
					{{ form_widget(form.department, {'attr': {'class': 'form-control'}}) }}
				</div>

				<div class="mb-3">
					{{ form_label(form.city) }}
					{{ form_widget(form.city, {'attr': {'class': 'form-control'}}) }}
					<small class="text-muted">Vous pouvez saisir la ville manuellement</small>
				</div>

				<div class="mb-3">
					{{ form_label(form.photoFiles) }}
					{{ form_widget(form.photoFiles, {'attr': {'class': 'form-control', 'multiple': 'multiple'}}) }}
					<small class="text-muted">Ajoutez jusqu'à 10 photos</small>
				</div>

				{# Affichage des photos déjà téléchargées #}
				<div class="mb-3">

					<h5>Photos déjà téléchargées</h5>
					{% if userProfile.photos is not empty %}
						<div class="photo-gallery">
							{% for photo in userProfile.photos %}
								<div class="photo-thumbnail">
									<img src="{{ asset('uploads/photos/' ~ photo) }}" alt="User Photo" class="img-thumbnail"/>
								</div>
							{% endfor %}
						</div>
					{% else %}
						<p>Aucune photo téléchargée pour le moment.</p>
					{% endif %}
				</div>
			</div>
		</div>

		<div class="text-center mt-4">
			<button type="submit" class="btn btn-primary">Sauvegarder les modifications</button>
		</div>

		{{ form_end(form) }}
	</div>
{% endblock %}

